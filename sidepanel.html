<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Resume Optimizer</title>
  <link href="https://fonts.googleapis.com/css2?family=Varela+Round&family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.13.1/font/bootstrap-icons.min.css">
  <link rel="stylesheet" href="sidepanel.css">
</head>
<body>
  <header>
    <div class="header-content">
      <div class="header-left">
        <div class="header-icon">
          <img src="logo.svg" alt="Resume Optimizer Logo" class="logo-svg" />
        </div>
        <div class="header-title">
          <h1>Resume Optimizer</h1>
        </div>
      </div>
      <div class="header-right">
        <button class="settings-btn" aria-label="Open settings" id="settings-btn" title="Settings">
          <i class="bi bi-gear" style="font-size: 20px; color: #4A5565;"></i>
        </button>
        <button class="close-btn" aria-label="Close side panel" id="close-btn">
          <i class="bi bi-x-lg" style="font-size: 20px; color: #4A5565;"></i>
        </button>
      </div>
    </div>
  </header>
  
  <!-- Tab Bar -->
  <div class="tab-bar">
    <button class="tab-btn active" id="tab-analysis" data-tab="analysis">Analysis</button>
    <button class="tab-btn" id="tab-recommendations" data-tab="recommendations">AI Suggestions</button>
  </div>
  
  <!-- Main View -->
  <div id="main-view" class="view">
    <main>
      <!-- Resume Match Score Section -->
      <section class="score-section">
        <div class="score-content">
          <div class="score-text">
            <h2>Resume Match Score</h2>
            <p class="score-description">
              Your resume has <strong>17 out of 25 (68%)</strong> keywords that appear in the job description.
            </p>
          </div>
          <div class="score-gauge-container">
            <div class="score-gauge" id="score-gauge">
              <div role="progressbar" aria-valuenow="68" aria-valuemin="0" aria-valuemax="100" id="progress-bar" style="--value: 68"></div>
              <div class="score-number-large" id="score-number">68</div>
            </div>
            <div class="score-info-tip">
              <i class="bi bi-lightbulb" style="font-size: 14px; color: #6B7280;"></i>
              <span>Score above 70% to increase your chances!</span>
            </div>
          </div>
        </div>
      </section>

      <!-- Missing Keywords Section -->
      <section class="keywords-section collapsible-section collapsed">
        <div class="section-header collapsible-header" id="missing-keywords-header">
          <div class="section-header-left">
            <div class="section-icon missing-icon">
              <i class="bi bi-exclamation-circle-fill" style="font-size: 16px; color: #F59E0B;"></i>
            </div>
            <h2>Missing Keywords</h2>
          </div>
          <button class="collapse-toggle" aria-label="Toggle section">
            <i class="bi bi-chevron-up" style="font-size: 14px; color: #6B7280;"></i>
          </button>
        </div>
        <div class="keywords-content" id="missing-keywords-content">
          <div class="keywords-grid" id="missing-keywords-grid">
          <span class="keyword-tag unmatched" data-keyword="Python">Python</span>
          <span class="keyword-tag unmatched" data-keyword="Machine Learning">Machine Learning</span>
          <span class="keyword-tag unmatched" data-keyword="AWS">AWS</span>
          <span class="keyword-tag unmatched" data-keyword="Docker">Docker</span>
          <span class="keyword-tag unmatched" data-keyword="Kubernetes">Kubernetes</span>
          <span class="keyword-tag unmatched" data-keyword="CI/CD">CI/CD</span>
          <span class="keyword-tag unmatched" data-keyword="Agile">Agile</span>
          <span class="keyword-tag unmatched" data-keyword="REST API">REST API</span>
          </div>
        </div>
      </section>

      <!-- Detected Keywords Section -->
      <section class="keywords-section collapsible-section collapsed">
        <div class="section-header collapsible-header" id="detected-keywords-header">
          <div class="section-header-left">
            <div class="section-icon detected-icon">
              <i class="bi bi-check-circle-fill" style="font-size: 16px; color: #10B981;"></i>
            </div>
            <h2>Detected Keywords</h2>
          </div>
          <button class="collapse-toggle" aria-label="Toggle section">
            <i class="bi bi-chevron-up" style="font-size: 14px; color: #6B7280;"></i>
          </button>
        </div>
        <div class="keywords-content" id="detected-keywords-content">
          <div class="keywords-grid" id="detected-keywords-grid">
          <span class="keyword-tag matched">JavaScript</span>
          <span class="keyword-tag matched">React</span>
          <span class="keyword-tag matched">TypeScript</span>
          <span class="keyword-tag matched">Node.js</span>
          <span class="keyword-tag matched">Git</span>
          <span class="keyword-tag matched">SQL</span>
          <span class="keyword-tag matched">MongoDB</span>
          <span class="keyword-tag matched">HTML/CSS</span>
          <span class="keyword-tag matched">Redux</span>
          <span class="keyword-tag matched">Testing</span>
          <span class="keyword-tag matched">Webpack</span>
          <span class="keyword-tag matched">GraphQL</span>
          <span class="keyword-tag matched">Express</span>
          <span class="keyword-tag matched">Tailwind CSS</span>
          <span class="keyword-tag matched">Next.js</span>
          </div>
        </div>
      </section>

      <!-- Full Job Description Section -->
      <section class="job-description-section">
        <div class="section-header">
          <h2>Detected Job Description</h2>
          <button class="edit-btn" id="edit-job-description-btn">Edit</button>
        </div>
        <div class="job-description-content">
          <p class="job-description-text" id="job-description-preview"></p>
          <p class="job-description-text-full" id="job-description-full-text" style="display: none;"></p>
          <div class="job-description-editable" id="job-description-editable" style="display: none;" contenteditable="true"></div>
          <button class="read-more-btn" id="read-more-btn" style="display: none;">Read more</button>
        </div>
      </section>

      <!-- Detected Job Section -->
      <section class="job-section" style="display: none;">
        <div class="section-header">
          <h2>Detected Job</h2>
          <button class="edit-btn" id="edit-job-btn">Edit</button>
        </div>
        <div class="job-card">
          <div class="job-icon" id="job-icon">LI</div>
          <div class="job-info">
            <h3 class="job-title" id="job-title-main">Senior Frontend Developer</h3>
            <p class="job-meta" id="job-meta-main">LinkedIn • TechCorp Inc.</p>
            <p class="job-date" id="job-date-main">Posted 2 days ago</p>
          </div>
        </div>
      </section>
    </main>

    <!-- Footer -->
    <footer class="upload-section">
      <input type="file" id="resume-upload" accept=".pdf,.doc,.docx" style="display: none;">
      <div class="current-resume">
        <span class="current-label">Current:</span>
        <span class="current-file" id="current-file">No file selected</span>
      </div>
      <button class="upload-btn" id="upload-btn">Upload New Resume</button>
    </footer>
  </div>

  <!-- Keyword Detail View -->
  <div id="keyword-view" class="view" style="display: none;">
    <div class="keyword-content">
      <!-- Part 1: Missing Keyword -->
      <div class="keyword-section">
        <h4 class="section-label">MISSING KEYWORD</h4>
        <div class="keyword-tag-display" id="missing-keywords-grid">
          <!-- All missing keywords will be populated here -->
        </div>
      </div>

      <div class="divider"></div>

      <!-- Part 2: AI Suggestion (Collapsible) -->
      <div class="keyword-section">
        <div class="ai-suggestion-header collapsible-header" id="ai-suggestion-header">
          <div class="section-header-left">
            <div class="section-icon ai-icon">
              <i class="bi bi-info-circle-fill" style="font-size: 16px; color: #2563EB;"></i>
            </div>
            <h4 class="section-label">AI SUGGESTION</h4>
          </div>
          <button class="collapse-toggle" aria-label="Toggle section">
            <i class="bi bi-chevron-up" style="font-size: 14px; color: #6B7280;"></i>
          </button>
        </div>
        <div class="ai-suggestion-content" id="ai-suggestion-content">
          <div class="ai-loading-indicator" id="ai-loading-indicator" style="display: none;">
            <div class="spinner"></div>
            <p class="loading-text">AI is analyzing your resume...</p>
          </div>
          <div class="suggestions-grid" id="suggestions-grid">
            <!-- Summary Section Suggestion -->
            <div class="suggestion-card">
              <div class="suggestion-header">
                <span class="suggestion-label">ADD TO SUMMARY</span>
                <button class="copy-btn" data-copy="summary">
                  <i class="bi bi-clipboard" style="font-size: 14px; color: #1447E6;"></i>
                  <span class="copy-text">Copy</span>
                </button>
              </div>
              <p class="suggestion-text" id="summary-suggestion">Full-stack developer with expertise in JavaScript, TypeScript, and Python, delivering scalable web applications</p>
            </div>

            <!-- Bullet Point Suggestion -->
            <div class="suggestion-card">
              <div class="suggestion-header">
                <span class="suggestion-label">ADD TO BULLET POINT</span>
                <button class="copy-btn" data-copy="bullet">
                  <i class="bi bi-clipboard" style="font-size: 14px; color: #1447E6;"></i>
                  <span class="copy-text">Copy</span>
                </button>
              </div>
              <p class="suggestion-text" id="bullet-suggestion">Applied machine learning algorithms including regression, classification, and clustering using Python and scikit-learn</p>
            </div>
          </div>
        </div>
      </div>

      <div class="divider"></div>

      <!-- Part 3: Original (Before) -->
      <div class="keyword-section">
        <h4 class="section-label">ORIGINAL (BEFORE)</h4>
        <div class="original-card">
          <p class="original-text" id="original-text">Full-stack developer with expertise in JavaScript and TypeScript, delivering scalable web applications</p>
        </div>
      </div>
    </div>
  </div>

  <!-- Job Edit View -->
  <div id="job-view" class="view" style="display: none;">
    <div class="keyword-header">
      <button class="back-btn" id="back-from-job">
        <i class="bi bi-arrow-left" style="font-size: 20px; color: #4A5565;"></i>
      </button>
      <h2 class="keyword-view-title">Detected Job</h2>
    </div>
    <div class="job-edit-content">
      <!-- Section 1: Job Title -->
      <div class="job-edit-section">
        <h4 class="section-label">JOB TITLE</h4>
        <div class="job-edit-card">
          <p class="job-edit-main" id="job-title-text">Senior Frontend Developer</p>
          <p class="job-edit-sub">This is the job title detected in the job description</p>
        </div>
      </div>

      <div class="divider"></div>

      <!-- Section 2: Job Company -->
      <div class="job-edit-section">
        <h4 class="section-label">JOB COMPANY</h4>
        <div class="job-edit-card">
          <p class="job-edit-main" id="job-company-text">TechCorp Inc.</p>
          <p class="job-edit-sub">This is the company name detected in the job description</p>
        </div>
      </div>

      <div class="divider"></div>

      <!-- Section 3: Job Source -->
      <div class="job-edit-section">
        <h4 class="section-label">JOB SOURCE</h4>
        <div class="job-edit-card">
          <p class="job-edit-main" id="job-source-text">LinkedIn</p>
          <p class="job-edit-sub">This is the source of the job description</p>
        </div>
      </div>

      <div class="divider"></div>

      <!-- Section 4: Job Posted -->
      <div class="job-edit-section">
        <h4 class="section-label">JOB POSTED</h4>
        <div class="job-edit-card">
          <p class="job-edit-main" id="job-posted-text">Posted 2 days ago</p>
          <p class="job-edit-sub">This is the posting date of the job</p>
        </div>
      </div>

      <div class="divider"></div>

      <!-- Section 5: Full Job Description -->
      <div class="job-edit-section">
        <h4 class="section-label">FULL JOB DESCRIPTION</h4>
        <div class="job-edit-card">
          <p class="job-description-text" id="job-description-full">We are seeking a talented Senior Frontend Developer to join our growing engineering team. 

Key Requirements:
• 5+ years of experience with JavaScript, React, and TypeScript
• Strong understanding of Python, Machine Learning, and AWS
• Experience with Docker, Kubernetes, and CI/CD pipelines
• Proficiency in REST API design and Agile methodologies
• Excellent problem-solving and communication skills

The ideal candidate will have experience building scalable web applications and working in fast-paced environments.</p>
        </div>
      </div>
    </div>
  </div>

  <!-- Settings View -->
  <div id="settings-view" class="view" style="display: none;">
    <div class="keyword-header">
      <button class="back-btn" id="back-from-settings">
        <i class="bi bi-arrow-left" style="font-size: 20px; color: #4A5565;"></i>
      </button>
      <h2 class="keyword-view-title">Settings</h2>
    </div>
    <div class="settings-content">
      <!-- AI Provider Selection -->
      <div class="settings-section">
        <h4 class="section-label">AI PROVIDER</h4>
        <div class="settings-card">
          <div class="provider-options">
            <label class="provider-option">
              <input type="radio" name="ai-provider" value="openai" id="provider-openai">
              <span class="provider-label">OpenAI (GPT-4/GPT-3.5)</span>
            </label>
            <label class="provider-option">
              <input type="radio" name="ai-provider" value="claude" id="provider-claude">
              <span class="provider-label">Anthropic Claude</span>
            </label>
            <label class="provider-option">
              <input type="radio" name="ai-provider" value="gemini" id="provider-gemini">
              <span class="provider-label">Google Gemini</span>
            </label>
          </div>
        </div>
      </div>

      <div class="divider"></div>

      <!-- Model Selection -->
      <div class="settings-section">
        <h4 class="section-label">MODEL</h4>
        <div class="settings-card">
          <!-- OpenAI Models -->
          <select id="model-openai" class="model-select" style="display: none;">
            <option value="gpt-4">GPT-4</option>
            <option value="gpt-4-turbo">GPT-4 Turbo</option>
            <option value="gpt-4o">GPT-4o</option>
            <option value="gpt-3.5-turbo" selected>GPT-3.5 Turbo</option>
            <option value="gpt-3.5-turbo-16k">GPT-3.5 Turbo 16k</option>
          </select>

          <!-- Claude Models -->
          <select id="model-claude" class="model-select" style="display: none;">
            <option value="claude-3-5-sonnet-20241022" selected>Claude 3.5 Sonnet</option>
            <option value="claude-3-5-haiku-20241022">Claude 3.5 Haiku</option>
            <option value="claude-3-opus-20240229">Claude 3 Opus</option>
            <option value="claude-3-sonnet-20240229">Claude 3 Sonnet</option>
            <option value="claude-3-haiku-20240307">Claude 3 Haiku</option>
          </select>

          <!-- Gemini Models -->
          <select id="model-gemini" class="model-select" style="display: none;">
            <option value="gemini-1.5-flash" selected>Gemini 1.5 Flash</option>
            <option value="gemini-1.5-pro">Gemini 1.5 Pro</option>
            <option value="gemini-1.5-flash-latest">Gemini 1.5 Flash (Latest)</option>
            <option value="gemini-1.5-pro-latest">Gemini 1.5 Pro (Latest)</option>
            <option value="gemini-pro">Gemini Pro (Legacy)</option>
          </select>

          <p class="settings-help-text" id="model-help">Select a provider to see available models</p>
        </div>
      </div>

      <div class="divider"></div>

      <!-- API Key Input -->
      <div class="settings-section">
        <h4 class="section-label">API KEY</h4>
        <div class="settings-card">
          <div class="api-key-input-wrapper">
            <input type="password" id="api-key-input" class="api-key-input" placeholder="Enter your API key">
            <button class="toggle-visibility-btn" id="toggle-api-key-visibility" aria-label="Toggle API key visibility">
              <i class="bi bi-eye" id="visibility-icon" style="font-size: 16px; color: #4A5565;"></i>
            </button>
          </div>
          <p class="settings-help-text" id="api-key-help">Select a provider to see API key format requirements</p>
          <div class="settings-links">
            <a href="https://platform.openai.com/api-keys" target="_blank" id="openai-link" style="display: none;">Get OpenAI API Key</a>
            <a href="https://console.anthropic.com/" target="_blank" id="claude-link" style="display: none;">Get Claude API Key</a>
            <a href="https://makersuite.google.com/app/apikey" target="_blank" id="gemini-link" style="display: none;">Get Gemini API Key</a>
          </div>
        </div>
      </div>

      <div class="divider"></div>

      <!-- Status Indicator -->
      <div class="settings-section">
        <h4 class="section-label">STATUS</h4>
        <div class="settings-card">
          <div class="status-indicator" id="settings-status">
            <span class="status-text">Not configured</span>
          </div>
        </div>
      </div>

      <div class="divider"></div>

      <!-- Action Buttons -->
      <div class="settings-section">
        <div class="settings-actions">
          <button class="save-settings-btn" id="save-settings-btn">Save Settings</button>
          <button class="clear-settings-btn" id="clear-settings-btn">Clear API Key</button>
        </div>
      </div>
    </div>
  </div>
  
  <!-- Load required libraries BEFORE sidepanel.js -->
  <script src="pdf.min.js"></script>
  <script src="mammoth.browser.min.js"></script>
  <script src="sidepanel.js"></script>
</body>
</html>
